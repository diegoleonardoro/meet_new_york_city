<!DOCTYPE html>
<html lang="en">

<!-- USED -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Profile</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
        integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />


    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100;0,300;0,600;1,300;1,500;1,700&display=swap"
        rel="stylesheet" />


    <link rel="stylesheet" href="/profileStyle.css">

</head>

<body>

    <script>

        let user = <%- JSON.stringify(user) %>;

        var imagesFormated = user.imagesFormated[0];

        var favoritePlaces = user.favoritePlaces;

        var amountOfPlacesArray= user.amountOfPhotosPerPlace;
     
        
        console.log(user);


        
    </script>

    <section class='profile-page'>

        <!-- profile nav -->
        <nav class ='profile-nav'>
            <ul class='icons'>
                <li><a href='#' class='active'><i class ='fas fa-map-signs'></i></a></li>
                <li><a href='#'>About</a></li>
                <li><a href='#'>Explore neighborhoods</a></li>
            </ul>
            
            <div class='search-bar'>
                <i class ='fas fa-search'></i>
                <input type='text' placeholder ='Search' class ='search-bar-input'>
            </div>

            <div class='user'>
                <div class='user-image-wrapper'>
                    <img src='https://media-exp1.licdn.com/dms/image/C4D03AQEj1JSX2oGPBg/profile-displayphoto-shrink_800_800/0/1589671182353?e=1640822400&v=beta&t=-mMk6bouHEzergtpKjrqsA-igIw9-UD8Lcd__ez08fk'/>
                </div>
                <a href='#' class='user-link'><%= user.name %></a>
                <i class='fas fa-chevron-down'></i>
            </div>
        </nav>
        <!-- end of profile nav -->






        <div id ='content'>



            <!------------------->
            <div id ='intro_contact'> 
                <% for(var c = 0; c < user.intro.length; c++){ %>
                    <p class ='self-intro-p'><%- user.intro[c]%></p>
                <% } %>
            </div>
            <!------------------->



            <!------------------->
            <div id='details'>
                <p>
                    Name: <%= user.name %>
                </p>
                <p>
                    Borough: ___
                </p>
                <p>
                    Neighborhood: <%= user.neighborhood %>
                </p>
            </div>
            <!------------------->




            <!------------------->
            <div id ='map_chart'>

                <div id ='section_map' class='explore-detail-btn-wraper'>
                   <!-- <button type ='button' class='explore-detail-btn'><i class='fas fa-chevron-down'></i>Map</button>-->
                    <div class='explore-detail-div'>
                        <svg id='nhd-places-map-svg'width="300" height="300" ></svg>
                    </div>
                </div>

                <div id ='section_chart'class='explore-detail-btn-wraper'>
                    <!--<button type ='button' class='explore-detail-btn'> <i class='fas fa-chevron-down'></i>This is how I feel about my neighborhood</button>-->
                    <h3>Neighborhood suggestions: </h3>
                    <div class='explore-detail-div'>        
                        <svg class='nhd-satisfact-svg'width="550" height="190"></svg>
                        <ul id="legends"></ul>
                    </div>
                </div>

            </div>
            <!------------------->


            <div style='display:none'>
                    <svg class="recommendedFace"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 189.11 159.77">
                        <defs>
                            <style>.path_recommendedFace{fill:#39b54a;}</style>
                        </defs>
                        <g id="recommended">
                            <path class="path_recommendedFace" d="M293.3,135.79C249,131,201,176.57,190.86,217.33c-13.47,54.3,45,73.76,88.07,74.79,20.75.5,46.95-.87,65.25-11.92,28.87-17.44,40.58-60,21.43-89.21-20.2-30.81-65.54-48.5-101.09-49.14"
                                transform="translate(-187.38 -133.94)" />
                            <path d="M293.3,134.29c-19.53-2.07-38.9,5.4-54.82,16.27a128.93,128.93,0,0,0-40.62,45c-8.16,15.23-13.53,33.65-8.58,50.78,4.21,14.57,15.49,25.44,28.5,32.57,14.14,7.75,30.19,11.78,46.12,13.67a194.44,194.44,0,0,0,26,1.13A155,155,0,0,0,323.37,290c10-2.4,19.64-6.36,27.77-12.79A65.28,65.28,0,0,0,368.42,256c8.45-16.25,10.75-36,4.55-53.46-6.47-18.19-21.93-32.09-38.13-41.77A148.13,148.13,0,0,0,278,141.35a127.11,127.11,0,0,0-13.5-1c-1.94,0-1.94,3,0,3a141.8,141.8,0,0,1,55.54,13.05c17.21,7.86,33.76,19.31,44.26,35.35,9.87,15.08,11.4,34.16,6.21,51.2-5.29,17.37-17.43,32.24-34.18,39.6-9.84,4.32-20.67,6.32-31.32,7.33a210.8,210.8,0,0,1-30,.6c-15.51-.77-31.13-3.65-45.58-9.43-13.22-5.3-26.14-13.61-33.32-26.28-8.09-14.25-6.54-31.15-1-46,6.76-18.07,19.07-34.14,33.51-46.78s32.2-22.69,51.42-24.69a63.2,63.2,0,0,1,13.26,0c1.92.2,1.91-2.8,0-3Z"
                                transform="translate(-187.38 -133.94)" />
                            <path class="path_recommendedFace" d="M266.68,173.58c0,13.24,1.78,26.08,1.3,39.1" transform="translate(-187.38 -133.94)" />
                            <path d="M263.68,173.58c0,13,1.75,26,1.3,39.1-.13,3.86,5.87,3.85,6,0,.45-13.06-1.28-26.05-1.3-39.1,0-3.86-6-3.87-6,0Z"
                                transform="translate(-187.38 -133.94)" />
                            <path class="path_recommendedFace" d="M291.44,171v41.71" transform="translate(-187.38 -133.94)" />
                            <path d="M288.44,171v41.71c0,3.86,6,3.86,6,0V171c0-3.86-6-3.86-6,0Z" transform="translate(-187.38 -133.94)" />
                            <path class="path_recommendedFace" d="M231.5,233.53c4.28,27.87,35.91,36.59,61.24,33.87,21.51-2.3,45.77-27.29,36.49-49.51"
                                transform="translate(-187.38 -133.94)" />
                            <path d="M228.6,234.32A38.4,38.4,0,0,0,243,258.65c7.75,6,17.22,9.48,26.83,11.06a86.53,86.53,0,0,0,14.9,1.16,55.17,55.17,0,0,0,14.65-1.74A52.09,52.09,0,0,0,326,250.55c7.21-9.44,10.82-22.08,6.16-33.46a3.09,3.09,0,0,0-3.69-2.09c-1.42.39-2.72,2.18-2.1,3.69a28.41,28.41,0,0,1,1.19,3.51c.14.53.26,1.06.36,1.6.06.32.12.64.17,1a2.41,2.41,0,0,1,.06.49,27.71,27.71,0,0,1,.14,3.53,24.26,24.26,0,0,1-.27,3,32.53,32.53,0,0,1-5.23,12.93,46.73,46.73,0,0,1-22.15,17.69,37.4,37.4,0,0,1-6.81,1.82c-.68.11-1.72.22-2.87.32s-2.24.16-3.37.21a82.32,82.32,0,0,1-13.77-.52c-8.26-1-17.22-3.7-24.47-8.45-.49-.33-1-.66-1.46-1l-.71-.53c-.54-.39.15.14-.32-.24a37.9,37.9,0,0,1-2.86-2.5c-.84-.81-1.64-1.66-2.4-2.54a21.47,21.47,0,0,1-1.83-2.41,32.46,32.46,0,0,1-2-3.3c-.28-.53-.54-1.07-.79-1.61a12.44,12.44,0,0,1-.53-1.25,36.84,36.84,0,0,1-2-7.71c-.25-1.6-2.26-2.49-3.69-2.1a3.08,3.08,0,0,0-2.1,3.69Z"
                                transform="translate(-187.38 -133.94)" />
                        </g>
                    </svg>
            </div>

            <div style='display:none'>
                    <svg class="neutralFace"   xmlns="http://www.w3.org/2000/svg" viewBox="0 0 189.11 159.77">
                        <defs>
                            <style>.path_neutralFace{fill:#fbb03b;}</style>
                        </defs>
                        <g id="Neutral">
                            <path class="path_neutralFace" d="M529.77,149.15c-44.33-4.81-92.33,40.78-102.44,81.54-13.48,54.31,45,73.76,88.07,74.8,20.75.49,47-.88,65.25-11.93,28.86-17.44,40.58-60,21.43-89.21-20.2-30.8-65.55-48.49-101.1-49.14"
                                transform="translate(-423.84 -147.31)" />
                            <path d="M529.77,147.65c-19.54-2.06-38.9,5.4-54.82,16.27a128.73,128.73,0,0,0-40.62,45c-8.16,15.24-13.54,33.65-8.59,50.78,4.21,14.57,15.5,25.44,28.5,32.57,14.14,7.75,30.19,11.78,46.12,13.67a194.66,194.66,0,0,0,26,1.13,154.39,154.39,0,0,0,33.47-3.73c10-2.4,19.65-6.36,27.78-12.78a65.62,65.62,0,0,0,17.28-21.18c8.44-16.25,10.74-36.05,4.55-53.46-6.47-18.2-21.94-32.09-38.14-41.77a147.81,147.81,0,0,0-56.81-19.4,124.54,124.54,0,0,0-13.51-1c-1.93,0-1.93,3,0,3a141.68,141.68,0,0,1,55.55,13.06c17.21,7.85,33.76,19.31,44.25,35.34,9.87,15.08,11.41,34.16,6.21,51.2-5.29,17.37-17.43,32.25-34.18,39.6-9.84,4.33-20.67,6.33-31.32,7.33a210.77,210.77,0,0,1-30.05.6c-15.5-.76-31.13-3.65-45.57-9.43-13.23-5.29-26.15-13.61-33.33-26.27-8.08-14.25-6.53-31.16-1-46,6.77-18.07,19.08-34.14,33.52-46.78s32.2-22.69,51.41-24.69a63.29,63.29,0,0,1,13.27,0c1.92.2,1.9-2.8,0-3Z"
                                transform="translate(-423.84 -147.31)" />
                            <path class="path_neutralFace" d="M505.16,187.92c0,13.24,1.78,26.08,1.3,39.09" transform="translate(-423.84 -147.31)" />
                            <path d="M502.16,187.92c0,13,1.75,26,1.3,39.09-.13,3.86,5.87,3.86,6,0,.45-13-1.28-26-1.3-39.09,0-3.86-6-3.87-6,0Z"
                                transform="translate(-423.84 -147.31)" />
                            <path class="path_neutralFace" d="M529.92,185.31V227" transform="translate(-423.84 -147.31)" />
                            <path d="M526.92,185.31V227c0,3.86,6,3.87,6,0v-41.7c0-3.86-6-3.87-6,0Z" transform="translate(-423.84 -147.31)" />
                            <path class="path_neutralFace" d="M472.13,261.72c9.45.65,74.27,4.49,90.8,1.89" transform="translate(-423.84 -147.31)" />
                            <path d="M472.13,264.72c10.13.7,20.28,1.2,30.43,1.66,14.57.66,29.17,1.22,43.75,1.11a119.25,119.25,0,0,0,17.42-1c1.6-.25,2.49-2.26,2.1-3.69a3.08,3.08,0,0,0-3.69-2.1,2.25,2.25,0,0,1-.66.1c.24.13.76-.1.09,0s-1,.12-1.55.16c-1.13.11-2.26.19-3.39.25-2.78.15-5.56.22-8.34.26-6.95.1-13.9,0-20.85-.19-14.08-.36-28.15-1-42.2-1.77-4.37-.24-8.74-.49-13.11-.79a3,3,0,0,0,0,6Z"
                                transform="translate(-423.84 -147.31)" />
                        </g>
                    </svg>
            </div>

            <div style='display:none'>
                    <svg class ='notRecommendedFace'  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 189.11 159.77">
                        <defs>
                            <style>.path_notRecommendedFace{fill:#e74b50;}</style>
                        </defs>
                        <g id="Not_recommended" data-name="Not recommended">
                            <path class="path_notRecommendedFace" d="M765.64,147.85c-44.33-4.81-92.33,40.78-102.44,81.54-13.47,54.3,45,73.76,88.07,74.79,20.75.5,47-.87,65.25-11.92,28.87-17.44,40.58-60,21.43-89.21-20.2-30.81-65.55-48.5-101.1-49.14"
                                transform="translate(-659.72 -146)" />
                            <path d="M765.64,146.35c-19.54-2.07-38.9,5.4-54.82,16.27a128.83,128.83,0,0,0-40.62,45c-8.16,15.23-13.53,33.65-8.58,50.78,4.21,14.57,15.49,25.44,28.49,32.57,14.15,7.75,30.19,11.78,46.12,13.67a194.66,194.66,0,0,0,26,1.13A154.94,154.94,0,0,0,795.7,302c10-2.4,19.65-6.36,27.78-12.79A65.28,65.28,0,0,0,840.76,268c8.45-16.25,10.74-36.05,4.55-53.46-6.47-18.19-21.93-32.09-38.13-41.77a148.13,148.13,0,0,0-56.82-19.4,127.1,127.1,0,0,0-13.51-1c-1.93,0-1.93,3,0,3a141.85,141.85,0,0,1,55.55,13.05c17.21,7.86,33.76,19.31,44.25,35.35,9.88,15.08,11.41,34.16,6.22,51.2-5.3,17.37-17.43,32.24-34.18,39.6-9.84,4.32-20.68,6.32-31.32,7.33a210.8,210.8,0,0,1-30,.6c-15.51-.77-31.14-3.65-45.58-9.43-13.22-5.3-26.14-13.62-33.33-26.28-8.08-14.25-6.53-31.15-1-46,6.77-18.07,19.08-34.14,33.52-46.78s32.2-22.69,51.41-24.69a63.29,63.29,0,0,1,13.27,0c1.92.2,1.9-2.8,0-3Z"
                                transform="translate(-659.72 -146)" />
                            <path class="path_notRecommendedFace" d="M765.14,189.22v41.7" transform="translate(-659.72 -146)" />
                            <path d="M762.14,189.22v41.7c0,3.86,6,3.87,6,0v-41.7c0-3.86-6-3.87-6,0Z" transform="translate(-659.72 -146)" />
                            <path class="path_notRecommendedFace" d="M735.17,187.92v41.7" transform="translate(-659.72 -146)" />
                            <path d="M732.17,187.92v41.7c0,3.86,6,3.86,6,0v-41.7c0-3.86-6-3.87-6,0Z" transform="translate(-659.72 -146)" />
                            <path class="path_notRecommendedFace" d="M704.61,266.49c18.59-7.79,56.14-27.05,94.09,4.5" transform="translate(-659.72 -146)" />
                            <path d="M705.4,269.38c2.13-.89,4.24-1.8,6.36-2.71l.78-.33.56-.24.57-.24,1-.39c1.14-.48,2.3-1,3.45-1.4a125.27,125.27,0,0,1,16.23-5.24,75.2,75.2,0,0,1,18.25-2.32,63.6,63.6,0,0,1,20.13,3.12,73.45,73.45,0,0,1,23.9,13.48,3.07,3.07,0,0,0,4.24,0,3,3,0,0,0,0-4.24c-12.8-10.58-28.05-17.5-44.77-18.28-12.74-.6-25.38,2.34-37.24,6.8-2.86,1.07-5.69,2.24-8.5,3.43l-3.63,1.55-1.65.71-.89.38-.29.12c-.67.29.62-.26,0,0a3.1,3.1,0,0,0-2.1,3.69c.39,1.41,2.19,2.73,3.69,2.09Z"
                                transform="translate(-659.72 -146)" />
                        </g>
                    </svg>
            </div>

            <!------------------->
            <div id ='fav_places'>

                <h5 id ='favorite_places_header'>Favorite places in <%= user.neighborhood %> </h5>

                <% let startColumn = 0; %>

                <% for(var e = 0; e < user.favoritePlaces.length; e++){ %>

                    <% let numOfPhotos = user.favoritePlaces[e].numberOfPhotos  %>

                    <% startColumn += 1; %>

                    <% let endColumn =  startColumn + 1;  %>

                    <% let startRow =  endColumn;  %>

                    <% let endRow =  startRow +=1 ;  %>

                    <div class='neighborhood-description' >

                        <div class='neighborhood-content'>

                                <h4> <%- user.favoritePlaces[e].place%> </h4>

                                <div class='neihborhood-image'  style="grid-column: <%= startColumn %>/<%= endColumn %>;  grid-row: <%= startRow  %>/<%=  endRow %> ; " >
                                    <i class="fas fa-arrow-circle-left"></i>      
                                    
                                    <div class ='divOfImages'>

                                    <% for(let q = 0; q < numOfPhotos ; q ++){ %>

                                            <% if (q===0){  %>

                                            <img src="data:image/png;base64,<%= user.imagesFormated[0]%>" />

                                            <% } else {  %>

                                                <img style="display:none;" src="data:image/png;base64,<%= user.imagesFormated[0]%>" />

                                            <% }   %>   

                                            <% user.imagesFormated.splice(0,1) %>

                                    <% } %>

                                    </div>

                                    <i class="fas fa-arrow-circle-right"></i>
   
                                </div>

                                <p class ='neighborhood-text'>
                                    <%- user.favoritePlaces[e].description %>
                                </p>
                        </div>
                    </div>
                <% } %>
            </div>
            <!------------------->
        </div>








        <!--
      

        <div id ='divProfileContentNhoodDetails'>
            <div class ='profile-content'> 
                <div class='profile-header'>
                    <div class='header-top'>
                        <div class='header-img-wrapper'>
                            <img  src='https://media-exp1.licdn.com/dms/image/C4D03AQEj1JSX2oGPBg/profile-displayphoto-shrink_800_800/0/1589671182353?e=1640822400&v=beta&t=-mMk6bouHEzergtpKjrqsA-igIw9-UD8Lcd__ez08fk' />
                        </div>
                        <h4>Name : </h4>
                        <p><%= user.name %></p>
                    </div>
                    <div class='header-top'>
                        <i class="fas fa-city"></i>
                        <h4>Borough: </h4>
                        <p>Brooklyn</p>
                    
                    </div>
                    <div class='header-top'>
                        <i class="fas fa-home"></i>
                        <h4>Neighborhood: </h4>
                        <p><%= user.neighborhood %></p>
                    </div>
                    <div class='header-introduction'>
                        <div class='self-introduction'>
                            <% for(var c = 0; c < user.intro.length; c++){ %>
                                <% if (c === 1 ) {%>
                                    <div class='self-introduction-inner-div'>
                                        <p ><%- user.intro[c][0]%></p>
                                        <p><%- user.intro[c][1]%></p>
                                    </div>
                                <% } else if(c === 2 ) { %>
                                    <div class='self-introduction-inner-div'>
                                        <p ><%- user.intro[c][0]%></p>
                                        <div class='three-words-div'>
                                            <% for(var u = 0; u < user.intro[c][1].length; u++){ %>
                                                <div class='arrow-paragraph-div'>
                                                        <i class="fas fa-circle circle"></i>
                                                    <p><%- user.intro[c][1][u]%></p>
                                                </div>
                                            <% } %>
                                        </div>
                                    </div>
                                <% } else { %>
                                    <p class ='self-intro-p'><%- user.intro[c]%></p>
                                <% } %>
                            <% } %>
                        </div>

                    </div>
                </div>

                <div class='neighborhood-descriptions'> <<<<<<<
                    <h4 id='placesToShowHeader'> These are the<span> places </span>that I will show you: </h4>


                    <% let q = 0 %>
                    
                    <% let z %>
                    <% for(var e = 0; e < user.favoritePlaces.length; e++){ %>

                                    <% if (e === 0){ %>
                                        <%  z = user.amountOfPhotosPerPlace[e] %>
                                    <% } else { %>
                                        <%  z =  user.amountOfPhotosPerPlace[e] + q %>
                                    <% }  %>
                        

                        <div class='neighborhood-description'>
                            <div class='neighborhood-content'>
                                <div class='neighborhood-info'> <<<<<<<
                                    <h4>Place <%- e +1 %>: <%- user.favoritePlaces[e].place%> </h4>
                                   
                                    <span>Description:</span>
                                </div>
                                <p class='neihborhood-text'>
                                    <%- user.favoritePlaces[e].description %>
                                </p> 
                                <div class='neihborhood-image'>
                                    <i class="fas fa-arrow-circle-left"></i>
                                    <div class ='divOfImages'>

                                        <% for(q; q < z; q ++){ %>
                                        
                                            <% if (z - user.amountOfPhotosPerPlace[e] === q) { %>
                                            
                                                <img src="data:image/png;base64,<%= user.imagesFormated[q]%>" /> 
                                            <% } else { %>

                                                <img style="display:none;" src="data:image/png;base64,<%= user.imagesFormated[q]%>" /> 

                                            <% } %>
                                                    
                                        <% } %>

                                        <% q = z %>
                                        
                                    </div>
                                    <i class="fas fa-arrow-circle-right"></i>
                                </div>
                                <div class='neihborhood-icons'>
                                    <i class='far fa-comment'></i>
                                    <i class='fas fa-retweet'></i>
                                    <i class='far fa-heart'></i>
                                    <i class='fas fa-share-alt'></i>
                                </div>
                            </div>
                        </div>
                    
                    <% } %>

                </div>

                </div>
               


                <div class = 'neighborhood-details'> 
                    <h3 class = 'neighborhood-details-heading'>Explore neighborhood details</h3>
        
                    <div class='neighborhood-details-buttons'>

                        <div class='explore-detail-btn-wraper'>
                            <button type ='button' class='explore-detail-btn'><i class='fas fa-chevron-down'></i>Map</button>
                            <div class='explore-detail-div'>
                                <svg id='nhd-places-map-svg'width="300" height="300" ></svg>
                            </div>
                        </div>

                        <div class='explore-detail-btn-wraper'>
                            <button type ='button' class='explore-detail-btn'> <i class='fas fa-chevron-down'></i>This is how I feel about my neighborhood</button>
                            <div class='explore-detail-div'>
                            
                                <svg class='nhd-satisfact-svg'width="350" height="480"></svg>
                                <ol id="legends"></ol>
                            </div>
                        </div>

                    </div>


                    <div class ='show-more-link'> 
                        <a href='#'>Show more</a>
                    </div>
                    <footer class='profile-footer'> 
                        <ul>
                            <li><a href='#'>Terms</a></li>
                            <li><a href='#'>Privacy Policy</a></li>
                            <li><a href='#'>Cookies</a></li>
                            <li><a href='#'>About</a></li>
                            <li><a href='#'>More</a></li>
                        </ul>
                    </footer>
                </div>

            </div>
        </div>
    -->
        <!-- end of profile content -->


        <!-- post new place button -->
        <button type='button' class='post-btn'>
           +<i class='fas fa-home'></i>Post new place
        </button>

        <!-- end of post new place button -->

    </section>

    


    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script type="text/javascript" src="/userProfile.js"></script>

</body>

</html>